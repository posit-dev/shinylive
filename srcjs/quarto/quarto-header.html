<script type="module">
  const localhostNames = ["localhost", "127.0.0.1", "[::1]"];
  if (!localhostNames.includes(window.location.hostname)) {
    const errorMessage =
      "Shinylive uses a Service Worker, which requires either a connection to localhost, or a connection via https.";
    document.body.innerText = errorMessage;
    throw Error(errorMessage);
  }

  const serviceWorkerPath = "../../serviceworker.js";

  // Start the service worker as soon as possible, to maximize the
  // resources it will be able to cache on the first run.
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .register(serviceWorkerPath)
      .then(() => console.log("Service Worker registered"))
      .catch(() => console.log("Service Worker registration failed"));

    navigator.serviceWorker.ready.then(() => {
      if (!navigator.serviceWorker.controller) {
        // For Shift+Reload case; navigator.serviceWorker.controller will
        // never appear until a regular (not Shift+Reload) page load.
        window.location.reload();
      }
    });
  }
</script>
<script src="../../shinylive/jquery.min.js"></script>
<script src="../../shinylive/jquery.terminal/js/jquery.terminal.min.js"></script>
<link
  href="../../shinylive/jquery.terminal/css/jquery.terminal.min.css"
  rel="stylesheet"
/>
<link rel="stylesheet" href="../../shinylive/shinylive.css" />
<script src="../../shinylive/run-python-blocks.js" type="module"></script>
